import{A as u,D as p,_ as f,C as v}from"./index-c44e899e.js";import{u as P,j as t,C as S,b as y,a as r,G as a,T as c,B as C,F as _,c as L,d as b,e as w,L as I,A as k,f as x,E as D}from"./react-admin-47320ed0.js";import{r as i}from"./vendor-1a3567d7.js";import{bc as T,G as g,aU as A,aW as E,bd as d,be as G,ba as $}from"./ra-data-graphql-simple-5fc26fa5.js";import{g as h}from"./@apollo/client-6a540b6b.js";import"./react-hook-form-3adb9e23.js";import"./graphql-422755b2.js";h`query getUSer ($id: ID!) {
  User (id: $id) {
   name
  }
}
`;const j=h`
  mutation login ($email: String!, $password: String!) {
    login(email: $email, password: $password)
  }
`,q=T({client:u}),R={checkAuth(e){return console.log(e),localStorage.getItem("ssid")?Promise.resolve():Promise.reject()},checkError(e){return console.log(e),Promise.resolve()},getPermissions(e){return console.log(e),Promise.resolve()},async login(e){console.log("ðŸš€ ~ file: index.ts:33 ~ login ~ params",e);const{data:n,errors:o}=await u.mutate({mutation:j,variables:e});if(console.log(o),o!=null&&o.length)throw new Error(o==null?void 0:o.reduce((s,l)=>s+l.message,""));console.log(n),localStorage.setItem("ssid",n.login)},logout(e){return localStorage.removeItem("username"),console.log(e),Promise.resolve()}},B={palette:{mode:"dark"}};function U(){const[e,n]=i.useState(null),o=g();return q.then(n).catch(s=>o(s.message,{type:"error"})),e}function z(e,n){const[{palette:o}]=P();return(o==null?void 0:o.mode)==="dark"?n:e}const F="/thot-frontend/assets/login-4327769a.svg",N=()=>t(S,{children:t(y,{children:r(a,{direction:"column",container:!0,children:[t(c,{source:"email"}),t(c,{source:"password"}),t(C,{type:"submit",variant:"contained",children:"Login"})]})})});function O(){const e=A(),n=g();return({email:s,password:l})=>{e({email:s,password:l}).catch(m=>n((m==null?void 0:m.message)??"somenthing went wrong",{type:"error"}))}}const V=i.memo(({login:e})=>{const n=O();return t(E,{onSubmit:n,children:e})}),H="_loginImageDark_qzs2y_1",M={loginImageDark:H};function W(){const e=z(void 0,M.loginImageDark);return r(_,{children:[t(L,{height:30,children:t(b,{lightTheme:w,darkTheme:B})}),r(a,{container:!0,height:"calc(100vh - 30px)",alignContent:"center",children:[t(a,{item:!0,md:8,width:{xs:0},children:t("img",{className:e,alt:"two people talking",width:"100%",src:F})}),t(a,{justifyContent:"center",alignContent:"center",item:!0,md:4,xs:12,container:!0,children:t(V,{login:t(N,{})})})]})]})}const te=i.memo(()=>{const e=U();return e?r(k,{basename:"/admin",loginPage:W,authProvider:R,dataProvider:e,children:[t(d,{name:"User",list:t(p,{LazyElement:i.lazy(()=>f(()=>import("./UserList-3dcb4c7d.js"),["assets/UserList-3dcb4c7d.js","assets/react-admin-47320ed0.js","assets/vendor-1a3567d7.js","assets/ra-data-graphql-simple-5fc26fa5.js","assets/react-hook-form-3adb9e23.js","assets/@apollo/client-6a540b6b.js","assets/graphql-422755b2.js"]))})}),t(d,{name:"Post",list:x,edit:D}),t(G,{children:t($,{path:"/other/*",element:t(v,{})})})]}):t(I,{})});export{te as default};
